!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.rdeck=t():e.rdeck=t()}(window,(function(){return function(e){function t(t){for(var r,i,u=t[0],c=t[1],l=t[2],f=0,s=[];f<u.length;f++)i=u[f],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&s.push(a[i][0]),a[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);for(d&&d(t);s.length;)s.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,u=1;u<n.length;u++){var c=n[u];0!==a[c]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={0:0},o=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var u=window.webpackJsonprdeck=window.webpackJsonprdeck||[],c=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var d=c;return o.push([266,1]),n()}({100:function(e,t,n){e.exports={tooltip:"_1o3vLW7Ljnp1RYgitRVcV7","layer-name":"_1EGHd-czbrt1MnwOIQDNjU",layerName:"_1EGHd-czbrt1MnwOIQDNjU","field-name":"_3V8HBKlx4eOkgGRNmc3Xmy",fieldName:"_3V8HBKlx4eOkgGRNmc3Xmy","field-value":"_2aerz5p_BktfQNNtqjZWXo",fieldValue:"_2aerz5p_BktfQNNtqjZWXo"}},132:function(e,t){},247:function(e,t,n){},258:function(e,t){},266:function(e,t,n){"use strict";n.r(t),n.d(t,"VERSION",(function(){return P})),n.d(t,"binding",(function(){return w}));var r={};n.r(r),n.d(r,"ArcLayer",(function(){return p.a})),n.d(r,"BitmapLayer",(function(){return p.b})),n.d(r,"IconLayer",(function(){return p.f})),n.d(r,"LineLayer",(function(){return p.g})),n.d(r,"PointCloudLayer",(function(){return p.i})),n.d(r,"ScatterplotLayer",(function(){return p.k})),n.d(r,"ColumnLayer",(function(){return p.c})),n.d(r,"GridCellLayer",(function(){return p.e})),n.d(r,"PathLayer",(function(){return p.h})),n.d(r,"PolygonLayer",(function(){return p.j})),n.d(r,"GeoJsonLayer",(function(){return p.d})),n.d(r,"TextLayer",(function(){return p.m})),n.d(r,"SolidPolygonLayer",(function(){return p.l})),n.d(r,"_MultiIconLayer",(function(){return p.n})),n.d(r,"ScreenGridLayer",(function(){return y.h})),n.d(r,"CPUGridLayer",(function(){return y.b})),n.d(r,"HexagonLayer",(function(){return y.g})),n.d(r,"ContourLayer",(function(){return y.c})),n.d(r,"GridLayer",(function(){return y.e})),n.d(r,"GPUGridLayer",(function(){return y.d})),n.d(r,"AGGREGATION_OPERATION",(function(){return y.a})),n.d(r,"HeatmapLayer",(function(){return y.f})),n.d(r,"_GPUGridAggregator",(function(){return y.l})),n.d(r,"_CPUAggregator",(function(){return y.k})),n.d(r,"_AggregationLayer",(function(){return y.i})),n.d(r,"_BinSorter",(function(){return y.j})),n.d(r,"GreatCircleLayer",(function(){return m.a})),n.d(r,"S2Layer",(function(){return m.e})),n.d(r,"TileLayer",(function(){return m.h})),n.d(r,"TripsLayer",(function(){return m.i})),n.d(r,"H3ClusterLayer",(function(){return m.b})),n.d(r,"H3HexagonLayer",(function(){return m.c})),n.d(r,"Tile3DLayer",(function(){return m.g})),n.d(r,"TerrainLayer",(function(){return m.f})),n.d(r,"MVTLayer",(function(){return m.d})),n.d(r,"SimpleMeshLayer",(function(){return g.b})),n.d(r,"ScenegraphLayer",(function(){return g.a}));var a=n(3),o=n.n(a),i=n(193),u=n.n(i),c=n(115),l=(n(143),n(286)),d=(n(265),n(100)),f=n.n(d);var s=Object(a.memo)(({info:e})=>{if(null==e)return null;const{index:t,layer:n,x:r,y:a}=e,{id:i,tooltip:u,data:c}=n.props,l=null==e.object,d=l?c.frame:e.object,s=l?e=>d[e][t]:e=>d[e],p="boolean"==typeof u?Object.keys(d):[u].flat();return o.a.createElement("div",{className:f.a.tooltip,style:{transform:"translate(".concat(r,"px, ").concat(a,"px)")}},o.a.createElement("div",{className:f.a.layerName},i),o.a.createElement("table",null,o.a.createElement("tbody",null,p.map(e=>o.a.createElement("tr",{key:e},o.a.createElement("td",{className:f.a.fieldName},e),o.a.createElement("td",{className:f.a.fieldValue},JSON.stringify(s(e))))))))}),p=(n(248),n(34)),y=n(184),m=n(183),g=n(105);var b=n(287);class x{constructor(e,t){var n;this.scale=void 0,this.accessor=void 0;const r=t.frame[e.value].map(e=>null!=e?e:void 0);this.scale=Object(b.a)().domain(null!==(n=e.domain)&&void 0!==n?n:function(e){const t=Math.min.apply(void 0,e),n=Math.max.apply(void 0,e);return[t,n]}(r)).range(e.range).unknown(e.unknown||[204,204,204]).nice(),this.accessor=function(e,t){return(n,{index:r})=>e(t[r])}(this.scale,r)}}const h={getHexagon:(e,{index:t,data:n})=>n.frame.hexagon[t],getHexagons:(e,{index:t,data:n})=>n.frame.hexagons[t],getS2Token:(e,{index:t,data:n})=>n.frame.token[t],getIcon:(e,{index:t,data:n})=>n.frame.icon[t],getText:(e,{index:t,data:n})=>n.frame.text[t],getPath:(e,{index:t,data:n})=>n.frame.path[t],getPolygon:(e,{index:t,data:n})=>n.frame.polygon[t],getPosition:(e,{index:t,data:n})=>n.frame.position[t],getSourcePosition:(e,{index:t,data:n})=>n.frame.sourcePosition[t],getTargetPosition:(e,{index:t,data:n})=>n.frame.targetPosition[t]};class v{constructor(e){let{type:t}=e,n=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["type"]);this.layer=void 0;const a=Object.entries(n).filter(([e,t])=>/get.*color/i.test(e)&&function(e){return null!=e&&"object"==typeof e&&!Array.isArray(e)}(t)).map(([e,t])=>[e,new x(t,n.data)]),o=Object.fromEntries(a.map(([e,t])=>[e,t.accessor]));this.layer=new r[t](Object.assign(h,n,o))}static create(e){return new v(e)}}n(247);function O(){return(O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var L=o.a.forwardRef((e,t)=>{const n=e.props,{mapboxApiAccessToken:r,mapStyle:i,mapOptions:u}=n,d=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(n,["mapboxApiAccessToken","mapStyle","mapOptions"]),f=Object(a.useMemo)(()=>e.layers.map(v.create),[e.layers]),[p,y]=j();return o.a.createElement(a.Fragment,null,o.a.createElement(l.a,O({ref:t},d,{layers:f.map(e=>e.layer),onHover:y}),r&&o.a.createElement(c.a,{mapboxApiAccessToken:r,mapStyle:i,mapOptions:u})),o.a.createElement(s,{info:p}))});const j=()=>{const[e,t]=Object(a.useState)(null);return[e,Object(a.useCallback)((e,n)=>{if(!e.picked||!(null==e?void 0:e.layer.props.tooltip))return t(null);t(e)},[])]},k={name:"rdeck",type:"output",factory(e,t,n){const r=o.a.createRef();return{get deckgl(){return r.current},renderValue({props:a,layers:i}){if(Array.isArray(a.initialBounds)){const e=new c.b({width:t,height:n}),{longitude:r,latitude:o,zoom:i}=e.fitBounds([a.initialBounds.slice(0,2),a.initialBounds.slice(2,4)]);a.initialViewState=Object.assign({},a.initialViewState,{longitude:r,latitude:o,zoom:i})}u.a.render(o.a.createElement(L,{ref:r,props:a,layers:i}),e)},resize(e,t){}}}};HTMLWidgets.widget(k);var w=k;const P="0.2.2"}})}));